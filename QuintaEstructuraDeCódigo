| tablero modJuego minigame atacante defensor games vencedor decision primero segundo nickname window texto |
Transcript clear.
games := Game new.
tablero := Tablero new.
tablero mostrarModosDeJuego.
window := SystemWindow new.
texto := TextMorph new.

modJuego := tablero modoEntrada: 1.

tablero cantJugadores: modJuego.

1 to: (tablero cantJugadores) do: [ :c|
	
	"Mostrar minijuegos a elegir en el transcript"
	nickname := (UIManager default request: 'Ingrese su nickname').
	minigame := tablero modoEntrada: 2.
	tablero inicializarJugador: nickname minijuego: minigame tablero: tablero numero: c
	 ].


(tablero listaJugadores) do: [ :j|
	j contrincantes: ((j territorio) at: 1) dim: (tablero dimension) tablero: tablero.
	 ].

tablero sumarRonda.
decision := false.

tablero mostrarTablero: window texto: texto.
"tablero actualizarTablero: window texto: texto."
[ (tablero ronda) ~= ((tablero cantJugadores) - 2) ] whileTrue: [
	
	(decision) ifFalse: [ atacante:= tablero tirarDadoJugador.] ifTrue: [
		atacante := vencedor.
		 ].
	
	vencedor := tablero procedimientoLucha: atacante objGame: games.
	tablero sumarRonda.
	"Metodo actualizar mapa"
	(((tablero ronda) \\ (tablero dueloExtra))= 0) ifTrue: [
		primero := tablero jugadorConMasTerreno.
		segundo := primero elegirRivalDueloExtra: tablero.
		tablero procedimientoDueloExtra: primero defensor: defensor objgame: games.
		].
	decision := vencedor continuarJugando.
	].

"Metodo Duelo Final"
